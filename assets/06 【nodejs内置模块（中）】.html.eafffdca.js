import{_ as t,o as e,c as o,a as s,b as n,d as c,F as l,e as a,r as u}from"./app.3fb7e337.js";const r={},i=a(`<h1 id="_06-\u3010nodejs\u5185\u7F6E\u6A21\u5757-\u4E2D-\u3011" tabindex="-1"><a class="header-anchor" href="#_06-\u3010nodejs\u5185\u7F6E\u6A21\u5757-\u4E2D-\u3011" aria-hidden="true">#</a> 06 \u3010nodejs\u5185\u7F6E\u6A21\u5757\uFF08\u4E2D\uFF09\u3011</h1><h2 id="_1-\u8DEF\u52B2\u5904\u7406\u6A21\u5757-path" tabindex="-1"><a class="header-anchor" href="#_1-\u8DEF\u52B2\u5904\u7406\u6A21\u5757-path" aria-hidden="true">#</a> 1.\u8DEF\u52B2\u5904\u7406\u6A21\u5757 path</h2><h3 id="_1-1-\u6A21\u5757\u6982\u89C8" tabindex="-1"><a class="header-anchor" href="#_1-1-\u6A21\u5757\u6982\u89C8" aria-hidden="true">#</a> 1.1 \u6A21\u5757\u6982\u89C8</h3><p>\u5728nodejs\u4E2D\uFF0Cpath\u662F\u4E2A\u4F7F\u7528\u9891\u7387\u5F88\u9AD8\uFF0C\u4F46\u5374\u8BA9\u4EBA\u53C8\u7231\u53C8\u6068\u7684\u6A21\u5757\u3002\u90E8\u5206\u56E0\u4E3A\u6587\u6863\u8BF4\u7684\u4E0D\u591F\u6E05\u6670\uFF0C\u90E8\u5206\u56E0\u4E3A\u63A5\u53E3\u7684\u5E73\u53F0\u5DEE\u5F02\u6027\u3002</p><p>\u5C06path\u7684\u63A5\u53E3\u6309\u7167\u7528\u9014\u5F52\u7C7B\uFF0C\u4ED4\u7EC6\u7422\u78E8\u7422\u78E8\uFF0C\u4E5F\u5C31\u6CA1\u90A3\u4E48\u8D39\u89E3\u4E86\u3002</p><h3 id="_1-2-\u83B7\u53D6\u8DEF\u5F84-\u6587\u4EF6\u540D-\u6269\u5C55\u540D" tabindex="-1"><a class="header-anchor" href="#_1-2-\u83B7\u53D6\u8DEF\u5F84-\u6587\u4EF6\u540D-\u6269\u5C55\u540D" aria-hidden="true">#</a> 1.2 \u83B7\u53D6\u8DEF\u5F84/\u6587\u4EF6\u540D/\u6269\u5C55\u540D</h3><ul><li>\u83B7\u53D6\u8DEF\u5F84\uFF1Apath.dirname(filepath)</li><li>\u83B7\u53D6\u6587\u4EF6\u540D\uFF1Apath.basename(filepath)</li><li>\u83B7\u53D6\u6269\u5C55\u540D\uFF1Apath.extname(filepath)</li></ul><h4 id="_1-2-1-\u83B7\u53D6\u6240\u5728\u8DEF\u5F84" tabindex="-1"><a class="header-anchor" href="#_1-2-1-\u83B7\u53D6\u6240\u5728\u8DEF\u5F84" aria-hidden="true">#</a> 1.2.1 \u83B7\u53D6\u6240\u5728\u8DEF\u5F84</h4><p>\u4F8B\u5B50\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> filepath <span class="token operator">=</span> <span class="token string">&#39;/tmp/demo/js/test.js&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F93\u51FA\uFF1A/tmp/demo/js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_1-2-2-\u83B7\u53D6\u6587\u4EF6\u540D" tabindex="-1"><a class="header-anchor" href="#_1-2-2-\u83B7\u53D6\u6587\u4EF6\u540D" aria-hidden="true">#</a> 1.2.2 \u83B7\u53D6\u6587\u4EF6\u540D</h4><p>\u4E25\u683C\u610F\u4E49\u4E0A\u6765\u8BF4\uFF0Cpath.basename(filepath) \u53EA\u662F\u8F93\u51FA\u8DEF\u5F84\u7684\u6700\u540E\u4E00\u90E8\u5206\uFF0C\u5E76\u4E0D\u4F1A\u5224\u65AD\u662F\u5426\u6587\u4EF6\u540D\u3002</p><p>\u4F46\u5927\u90E8\u5206\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7528\u5B83\u6765\u4F5C\u4E3A\u7B80\u6613\u7684\u201C\u83B7\u53D6\u6587\u4EF6\u540D\u201C\u7684\u65B9\u6CD5\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F93\u51FA\uFF1Atest.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">&#39;/tmp/demo/js/test.js&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F93\u51FA\uFF1Atest</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">&#39;/tmp/demo/js/test/&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F93\u51FA\uFF1Atest</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">&#39;/tmp/demo/js/test&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u5982\u679C\u53EA\u60F3\u83B7\u53D6\u6587\u4EF6\u540D\uFF0C\u5355\u4E0D\u5305\u62EC\u6587\u4EF6\u6269\u5C55\u5462\uFF1F\u53EF\u4EE5\u7528\u4E0A\u7B2C\u4E8C\u4E2A\u53C2\u6570\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u8F93\u51FA\uFF1Atest</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">&#39;/tmp/demo/js/test.js&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.js&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_1-2-3-\u83B7\u53D6\u6587\u4EF6\u6269\u5C55\u540D" tabindex="-1"><a class="header-anchor" href="#_1-2-3-\u83B7\u53D6\u6587\u4EF6\u6269\u5C55\u540D" aria-hidden="true">#</a> 1.2.3 \u83B7\u53D6\u6587\u4EF6\u6269\u5C55\u540D</h4><p>\u7B80\u5355\u7684\u4F8B\u5B50\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> filepath <span class="token operator">=</span> <span class="token string">&#39;/tmp/demo/js/test.js&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F93\u51FA\uFF1A.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u66F4\u8BE6\u7EC6\u7684\u89C4\u5219\u662F\u5982\u4E0B\uFF1A\uFF08\u5047\u8BBE path.basename(filepath) === B \uFF09</p><ul><li>\u4ECEB\u7684\u6700\u540E\u4E00\u4E2A<code>.</code>\u5F00\u59CB\u622A\u53D6\uFF0C\u76F4\u5230\u6700\u540E\u4E00\u4E2A\u5B57\u7B26\u3002</li><li>\u5982\u679CB\u4E2D\u4E0D\u5B58\u5728<code>.</code>\uFF0C\u6216\u8005B\u7684\u7B2C\u4E00\u4E2A\u5B57\u7B26\u5C31\u662F<code>.</code>\uFF0C\u90A3\u4E48\u8FD4\u56DE\u7A7A\u5B57\u7B26\u4E32\u3002</li></ul>`,21),k={href:"https://nodejs.org/api/path.html#path_path_extname_path",target:"_blank",rel:"noopener noreferrer"},b=a(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">&#39;index.html&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// returns &#39;.html&#39;</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">&#39;index.coffee.md&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// returns &#39;.md&#39;</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">&#39;index.&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// returns &#39;.&#39;</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">&#39;index&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// returns &#39;&#39;</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">&#39;.index&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// returns &#39;&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_1-3-\u8DEF\u5F84\u7EC4\u5408" tabindex="-1"><a class="header-anchor" href="#_1-3-\u8DEF\u5F84\u7EC4\u5408" aria-hidden="true">#</a> 1.3 \u8DEF\u5F84\u7EC4\u5408</h3><ul><li>path.join([...paths])</li><li>path.resolve([...paths])</li></ul><h4 id="_1-3-1-path-resolve-\u751F\u6210\u5B8C\u6210\u7684\u7EDD\u5BF9\u8DEF\u5F84" tabindex="-1"><a class="header-anchor" href="#_1-3-1-path-resolve-\u751F\u6210\u5B8C\u6210\u7684\u7EDD\u5BF9\u8DEF\u5F84" aria-hidden="true">#</a> 1.3.1 path.resolve() \u751F\u6210\u5B8C\u6210\u7684\u7EDD\u5BF9\u8DEF\u5F84</h4><p>\u8BED\u6CD5\u683C\u5F0F\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>myPaths<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u89E3\u91CA\uFF1A</p><ul><li>\u5C06\u8DEF\u5F84\u6216\u8DEF\u5F84\u7247\u6BB5\u7684\u5E8F\u5217\u89E3\u6790\u4E3A\u7EDD\u5BF9\u8DEF\u5F84\u3002</li><li>\u8FD4\u56DE\u7684\u8DEF\u5F84\u662F<strong>\u4ECE\u53F3\u5F80\u5DE6</strong>\u5904\u7406\uFF0C\u540E\u9762\u7684\u6BCF\u4E2A myPath \u88AB\u4F9D\u6B21\u89E3\u6790\uFF0C\u76F4\u5230\u6784\u9020\u51FA\u4E00\u4E2A\u5B8C\u6574\u7684\u7EDD\u5BF9\u8DEF\u5F84\u3002</li></ul><blockquote><p>\u4F60\u53EF\u4EE5\u60F3\u8C61\u73B0\u5728\u4F60\u5728shell\u4E0B\u9762\uFF0C\u4ECE\u5DE6\u5230\u53F3\u8FD0\u884C\u4E00\u904D<code>cd path</code>\u547D\u4EE4\uFF0C\u6700\u7EC8\u83B7\u53D6\u7684\u7EDD\u5BF9\u8DEF\u5F84/\u6587\u4EF6\u540D\uFF0C\u5C31\u662F\u8FD9\u4E2A\u63A5\u53E3\u6240\u8FD4\u56DE\u7684\u7ED3\u679C\u4E86\u3002</p></blockquote><p>\u4EE3\u7801\u4E3E\u4F8B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;/foo1/foo2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dselegent&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;foo3&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result1 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token operator">...</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6253\u5370\u7ED3\u679C\uFF1A/foo1/foo2/dselegent/foo3</span>

<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;/foo1/foo2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/dselegent&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;foo3&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result2 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token operator">...</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6253\u5370\u7ED3\u679C\uFF1A/dselegent/foo3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u5047\u8BBE\u5F53\u524D\u5DE5\u4F5C\u8DEF\u5F84\u662F /Users/a/Documents/git-code/nodejs-learning-guide/examples/2016.11.08-node-path</span>

<span class="token comment">// \u8F93\u51FA /Users/a/Documents/git-code/nodejs-learning-guide/examples/2016.11.08-node-path</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

<span class="token comment">// \u8F93\u51FA /Users/a/Documents/git-code/nodejs-learning-guide/examples/2016.11.08-node-path</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

<span class="token comment">// \u8F93\u51FA /foo/bar/baz</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;/foo/bar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./baz&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F93\u51FA /foo/bar/baz</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;/foo/bar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./baz/&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F93\u51FA /tmp/file</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;/foo/bar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/tmp/file/&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F93\u51FA /Users/a/Documents/git-code/nodejs-learning-guide/examples/2016.11.08-node-path/www/js/mod.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;www&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;js/upload&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;../mod.js&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="_1-3-2-path-join-\u5C06\u591A\u4E2A\u8DEF\u5F84\u8FDB\u884C\u62FC\u63A5" tabindex="-1"><a class="header-anchor" href="#_1-3-2-path-join-\u5C06\u591A\u4E2A\u8DEF\u5F84\u8FDB\u884C\u62FC\u63A5" aria-hidden="true">#</a> 1.3.2 path.join() \u5C06\u591A\u4E2A\u8DEF\u5F84\u8FDB\u884C\u62FC\u63A5</h4><p>\u5982\u679C\u662F\u6211\u4EEC\u624B\u52A8\u62FC\u63A5\u8DEF\u5F84\uFF0C\u5BB9\u6613\u51FA\u9519\u3002\u8FD9\u4E2A\u65F6\u5019\uFF0C\u53EF\u4EE5\u5229\u7528 path.join() \u65B9\u6CD5\u5C06\u8DEF\u5F84\u8FDB\u884C\u62FC\u63A5\u3002</p><p>\u8BED\u6CD5\u683C\u5F0F\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>paths<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u89E3\u91CA\uFF1A\u4F7F\u7528\u5E73\u53F0\u7279\u5B9A\u7684\u5206\u9694\u7B26\u4F5C\u4E3A\u5B9A\u754C\u7B26\u5C06\u6240\u6709\u7ED9\u5B9A\u7684 path \u7247\u6BB5\u8FDE\u63A5\u5728\u4E00\u8D77\uFF0C\u7136\u540E\u89C4\u8303\u5316\u751F\u6210\u7684\u8DEF\u5F84\u3002</p><p>\u4EE3\u7801\u4E3E\u4F8B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result1 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./app.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8FD4\u56DE\uFF1A/Users/smyhvae/dselegent/app.js</span>

<span class="token keyword">const</span> result2 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;/foo1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;foo2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./foo3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8FD4\u56DE\uFF1A/foo1/foo2/foo3</span>

<span class="token keyword">const</span> result3 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;/foo1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;foo2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/foo3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8FD4\u56DE\uFF1A/foo1/foo2/foo3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_1-3-3-path-resolve-\u548C-path-join-\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_1-3-3-path-resolve-\u548C-path-join-\u533A\u522B" aria-hidden="true">#</a> 1.3.3 path.resolve \u548C path.join \u533A\u522B</h4><p>path.resolve \u548C path.join \u90FD\u662F\u5C5E\u4E8E path \u6838\u5FC3\u6A21\u5757\u4E0B\u7684\u65B9\u6CD5\uFF0C\u7528\u6765\u62FC\u63A5\u8DEF\u5F84\u3002</p><p>\u90FD\u53EF\u4EE5\u62FC\u63A5\u6210\u4E00\u4E2A\u5B8C\u6574\u8DEF\u5F84.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> dirname <span class="token operator">=</span> <span class="token string">&#39;/User/Desktop&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> basename <span class="token operator">=</span> <span class="token string">&#39;abc.txt&#39;</span><span class="token punctuation">;</span>

path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /User/Desktop/abc.txt</span>

path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /User/Desktop/abc.txt</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u5982\u679C dirname \u662F\u4EE5 ./ \u3001../\u3001\u4E0D\u52A0 / \u5F00\u5934\u7684\u8BDD\uFF0C\u90A3\u4E48 resolve \u4F1A\u627E\u5230\u78C1\u76D8\u4E0B\u7684\u6839\u76EE\u5F55</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span> dirname <span class="token operator">=</span> <span class="token string">&#39;../User/Desktop&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> basename <span class="token operator">=</span> <span class="token string">&#39;abc.txt&#39;</span><span class="token punctuation">;</span>
 
path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ../User/Desktop/abc.txt</span>
 
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /Users/Desktop/node/User/Desktop/abc.txt</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u5982\u679C basename \u662F\u4EE5 / \u5F00\u5934\u7684\uFF0C\u90A3\u4E48 resolve \u5C31\u4F1A\u76F4\u63A5\u8FD4\u56DE basename</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span> dirname <span class="token operator">=</span> <span class="token string">&#39;/User/Desktop&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> basename <span class="token operator">=</span> <span class="token string">&#39;/abc.txt&#39;</span><span class="token punctuation">;</span>
 
path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /User/Desktop/abc.txt</span>
 
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> basename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// /abc.txt</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-4-\u51E0\u4E2A\u5E38\u89C1\u8DEF\u5F84" tabindex="-1"><a class="header-anchor" href="#_1-4-\u51E0\u4E2A\u5E38\u89C1\u8DEF\u5F84" aria-hidden="true">#</a> 1.4 \u51E0\u4E2A\u5E38\u89C1\u8DEF\u5F84</h3><ul><li><code>__dirname</code>\uFF1A\u8FD9\u662F\u4E00\u4E2A\u5E38\u91CF\uFF0C\u8868\u793A\uFF1A\u5F53\u524D\u6267\u884C\u6587\u4EF6\u6240\u5728<strong>\u5B8C\u6574\u76EE\u5F55</strong>\u3002</li><li><code>__filename</code>\uFF1A\u8FD9\u662F\u4E00\u4E2A\u5E38\u91CF\u3002\u8868\u793A\uFF1A\u5F53\u524D\u6267\u884C\u6587\u4EF6\u7684<strong>\u5B8C\u6574\u76EE\u5F55 + \u6587\u4EF6\u540D</strong>\u3002</li><li><code>process.cwd</code>\uFF1A\u83B7\u53D6\u5F53\u524D\u6267\u884C Node\u547D\u4EE4 \u65F6\u7684\u76EE\u5F55\u540D\u3002</li></ul><p>\u4EE3\u7801\u4E3E\u4F8B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">node</span> app.js

/Users/smyhvae/dselegent
/Users/smyhvae/dselegent/app.js
/Users/smyhvae/dselegent
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_2-\u672C\u5730\u6587\u4EF6\u64CD\u4F5C\u6A21\u5757-fs" tabindex="-1"><a class="header-anchor" href="#_2-\u672C\u5730\u6587\u4EF6\u64CD\u4F5C\u6A21\u5757-fs" aria-hidden="true">#</a> 2.\u672C\u5730\u6587\u4EF6\u64CD\u4F5C\u6A21\u5757 fs</h2><blockquote><h3 id="node-js-\u4E2D\u7684\u540C\u6B65\u548C\u5F02\u6B65\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#node-js-\u4E2D\u7684\u540C\u6B65\u548C\u5F02\u6B65\u7684\u533A\u522B" aria-hidden="true">#</a> Node.js \u4E2D\u7684\u540C\u6B65\u548C\u5F02\u6B65\u7684\u533A\u522B</h3><p>fs\u6A21\u5757\u5BF9\u6587\u4EF6\u7684\u51E0\u4E4E\u6240\u6709\u64CD\u4F5C\u90FD\u6709\u540C\u6B65\u548C\u5F02\u6B65\u4E24\u79CD\u5F62\u5F0F\u3002\u4F8B\u5982\uFF1AreadFile() \u548C readFileSync()\u3002</p><p>\u533A\u522B\uFF1A</p><ul><li>\u540C\u6B65\u8C03\u7528\u4F1A\u963B\u585E\u4EE3\u7801\u7684\u6267\u884C\uFF0C\u5F02\u6B65\u5219\u4E0D\u4F1A\u3002</li><li>\u5F02\u6B65\u8C03\u7528\u4F1A\u5C06 \u8BFB\u53D6\u4EFB\u52A1 \u4E0B\u8FBE\u5230\u4EFB\u52A1\u961F\u5217\uFF0C\u76F4\u5230\u4EFB\u52A1\u6267\u884C\u5B8C\u6210\u624D\u4F1A\u56DE\u8C03\u3002</li><li>\u5F02\u5E38\u5904\u7406\u65B9\u9762\uFF1A\u540C\u6B65\u5FC5\u987B\u4F7F\u7528 try catch \u65B9\u5F0F\uFF0C\u5F02\u6B65\u53EF\u4EE5\u901A\u8FC7\u56DE\u8C03\u51FD\u6570\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u3002\u3010\u91CD\u8981\u3011</li></ul></blockquote><h3 id="_2-1-\u6587\u4EF6\u8BFB\u53D6" tabindex="-1"><a class="header-anchor" href="#_2-1-\u6587\u4EF6\u8BFB\u53D6" aria-hidden="true">#</a> 2.1 \u6587\u4EF6\u8BFB\u53D6</h3><p><strong>\u540C\u6B65\u8BFB\u53D6</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> data<span class="token punctuation">;</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
    data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./fileForRead.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u6587\u4EF6\u5185\u5BB9: &#39;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;\u8BFB\u53D6\u6587\u4EF6\u51FA\u9519: &#39;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u8F93\u51FA\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/usr/local/bin/node readFileSync.js
\u6587\u4EF6\u5185\u5BB9: hello world
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>\u5F02\u6B65\u8BFB\u53D6</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;./fileForRead.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;\u8BFB\u53D6\u6587\u4EF6\u51FA\u9519: &#39;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u6587\u4EF6\u5185\u5BB9: &#39;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u8F93\u51FA\u5982\u4E0B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/usr/local/bin/node readFile.js
\u6587\u4EF6\u5185\u5BB9: hello world
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><strong>fs/promises \u4ECE Node.js 14 \u5F00\u59CB\u53EF\u7528</strong> \u4ECE Node.js 14 \u5F00\u59CB\uFF0Cfs \u6A21\u5757\u63D0\u4F9B\u4E86\u4E24\u79CD\u4F7F\u7528\u57FA\u4E8E promises \u7684\u6587\u4EF6\u7CFB\u7EDF\u7684\u65B9\u6CD5\u3002\u8FD9\u4E9B promises \u53EF\u4EE5\u901A\u8FC7 <code>require(&#39;fs&#39;).promises</code> \u6216 <code>require(&#39;fs/promises&#39;) </code>\u83B7\u5F97\u3002</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> readFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs/promises&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">&#39;utf8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-2-\u6587\u4EF6\u5199\u5165" tabindex="-1"><a class="header-anchor" href="#_2-2-\u6587\u4EF6\u5199\u5165" aria-hidden="true">#</a> 2.2 \u6587\u4EF6\u5199\u5165</h3><p>\u5907\u6CE8\uFF1A\u4EE5\u4E0B\u4EE3\u7801\uFF0C\u5982\u679C\u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u5219\u521B\u5EFA\u6587\u4EF6\uFF1B\u5982\u679C\u6587\u4EF6\u5B58\u5728\uFF0C\u5219\u8986\u76D6\u6587\u4EF6\u5185\u5BB9\uFF1B</p><p><strong>\u5F02\u6B65\u5199\u5165</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&#39;./fileForWrite.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u6587\u4EF6\u5199\u5165\u6210\u529F&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>\u540C\u6B65\u5199\u5165</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./fileForWrite1.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u6587\u4EF6\u5199\u5165\u6210\u529F&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>promises</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> writeFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs/promises&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&#39;message.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">&#39;utf8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// When a request is aborted - err is an AbortError</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-3-\u6587\u4EF6\u662F\u5426\u5B58\u5728" tabindex="-1"><a class="header-anchor" href="#_2-3-\u6587\u4EF6\u662F\u5426\u5B58\u5728" aria-hidden="true">#</a> 2.3 \u6587\u4EF6\u662F\u5426\u5B58\u5728</h3><p><code>fs.exists()</code>\u5DF2\u7ECF\u662F<code>deprecated</code>\u72B6\u6001\uFF0C\u73B0\u5728\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u4EE3\u7801\u5224\u65AD\u6587\u4EF6\u662F\u5426\u5B58\u5728\u3002</p><p><strong>\u5F02\u6B65\u672C</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//\u68C0\u67E5\u6587\u4EF6\u662F\u5426\u5B58\u5728\u4E8E\u5F53\u524D\u76EE\u5F55\u4E2D</span>
fs<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">&#39;package.json&#39;</span><span class="token punctuation">,</span> fs<span class="token punctuation">.</span>constants<span class="token punctuation">.</span><span class="token constant">F_OK</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;package.json\u4E0D\u5B58\u5728\u4E8E\u5F53\u524D\u76EE\u5F55\u4E2D&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;package.json\u5B58\u5728\u4E8E\u5F53\u524D\u76EE\u5F55\u4E2D&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">&#39;index.js&#39;</span><span class="token punctuation">,</span> fs<span class="token punctuation">.</span>constants<span class="token punctuation">.</span><span class="token constant">F_OK</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;index.js\u4E0D\u5B58\u5728\u4E8E\u5F53\u524D\u76EE\u5F55\u4E2D&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;index.js\u5B58\u5728\u4E8E\u5F53\u524D\u76EE\u5F55\u4E2D&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>fs.access()</code>\u9664\u4E86\u5224\u65AD\u6587\u4EF6\u662F\u5426\u5B58\u5728\uFF08\u9ED8\u8BA4\u6A21\u5F0F\uFF09\uFF0C\u8FD8\u53EF\u4EE5\u7528\u6765\u5224\u65AD\u6587\u4EF6\u7684\u6743\u9650\u3002</p><p>\u5907\u5FD8\uFF1A<code>fs.constants.F_OK</code>\u7B49\u5E38\u91CF\u65E0\u6CD5\u83B7\u53D6\uFF08node v6.1\uFF0Cmac 10.11.4\u4E0B\uFF0C<code>fs.constants</code>\u662F<code>undefined</code>\uFF09</p><p><strong>\u540C\u6B65</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> accessSync<span class="token punctuation">,</span> constants <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">accessSync</span><span class="token punctuation">(</span><span class="token string">&#39;etc/passwd&#39;</span><span class="token punctuation">,</span> constants<span class="token punctuation">.</span><span class="token constant">R_OK</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;can read&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;no access!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>promises</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> access<span class="token punctuation">,</span> constants <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;node:fs/promises&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token string">&#39;/etc/passwd&#39;</span><span class="token punctuation">,</span> constants<span class="token punctuation">.</span><span class="token constant">R_OK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;can access&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;cannot access&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-4-\u5220\u9664\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-4-\u5220\u9664\u6587\u4EF6" aria-hidden="true">#</a> 2.4 \u5220\u9664\u6587\u4EF6</h3><p><strong>\u5F02\u6B65\u7248\u672C</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">&#39;./fileForUnlink.txt&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u6587\u4EF6\u5220\u9664\u6210\u529F&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>\u540C\u6B65\u7248\u672C</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> unlinkSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">unlinkSync</span><span class="token punctuation">(</span><span class="token string">&#39;/tmp/hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;successfully deleted /tmp/hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// handle the error</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>promises</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> unlink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs/promises&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">&#39;/tmp/hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;successfully deleted /tmp/hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// handle the error</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-5-\u521B\u5EFA\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#_2-5-\u521B\u5EFA\u76EE\u5F55" aria-hidden="true">#</a> 2.5 \u521B\u5EFA\u76EE\u5F55</h3><p><strong>\u5F02\u6B65\u7248\u672C</strong>\uFF08\u5982\u679C\u76EE\u5F55\u5DF2\u5B58\u5728\uFF0C\u4F1A\u62A5\u9519\uFF09</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// fs.mkdir(path[, mode], callback)</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">&#39;sub&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u521B\u5EFA\u76EE\u5F55\u6210\u529F&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>\u540C\u6B65\u7248\u672C</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// fs.mkdirSync(path[, mode])</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u521B\u5EFA\u76EE\u5F55\u6210\u529F&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>promises</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mkdir <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs/promises&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> createDir <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">mkdir</span><span class="token punctuation">(</span>projectFolder<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">created </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>createDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-6-\u904D\u5386\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#_2-6-\u904D\u5386\u76EE\u5F55" aria-hidden="true">#</a> 2.6 \u904D\u5386\u76EE\u5F55</h3><p>\u540C\u6B65\u7248\u672C\uFF0C\u6CE8\u610F\uFF1A<code>fs.readdirSync()</code>\u53EA\u4F1A\u8BFB\u4E00\u5C42\uFF0C\u6240\u4EE5\u9700\u8981\u5224\u65AD\u6587\u4EF6\u7C7B\u578B\u662F\u5426\u76EE\u5F55\uFF0C\u5982\u679C\u662F\uFF0C\u5219\u8FDB\u884C\u9012\u5F52\u904D\u5386\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// fs.readdirSync(path[, options])</span>

<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">getFilesInDir</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">var</span> results <span class="token operator">=</span> <span class="token punctuation">[</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        file <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> stats <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            results <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span> <span class="token function">getFilesInDir</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> results<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> files <span class="token operator">=</span> <span class="token function">getFilesInDir</span><span class="token punctuation">(</span><span class="token string">&#39;../&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_2-7-\u8BFB\u53D6\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#_2-7-\u8BFB\u53D6\u76EE\u5F55" aria-hidden="true">#</a> 2.7 \u8BFB\u53D6\u76EE\u5F55</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> readdir <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs/promises&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readdir</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> file <span class="token keyword">of</span> files<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-8-\u5220\u9664\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#_2-8-\u5220\u9664\u76EE\u5F55" aria-hidden="true">#</a> 2.8 \u5220\u9664\u76EE\u5F55</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5220\u9664\u76EE\u5F55(\u524D\u63D0\u6CA1\u6709\u6587\u4EF6\u5728\u91CC\u9762)</span>
fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&#39;./avatar&#39;</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">&amp;&amp;</span> err<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">&#39;ENOENT&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u76EE\u5F55\u4E0D\u5B58\u5728&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-9-\u5220\u9664\u6574\u4E2A\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#_2-9-\u5220\u9664\u6574\u4E2A\u76EE\u5F55" aria-hidden="true">#</a> 2.9 \u5220\u9664\u6574\u4E2A\u76EE\u5F55</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//1</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// console.log(data)</span>
    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./avatar/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//2</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./avatar/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
    fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//3</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>promises<span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">&#39;./image2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./image2/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&#39;./image2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_2-10-\u6587\u4EF6\u91CD\u547D\u540D" tabindex="-1"><a class="header-anchor" href="#_2-10-\u6587\u4EF6\u91CD\u547D\u540D" aria-hidden="true">#</a> 2.10 \u6587\u4EF6\u91CD\u547D\u540D</h3><p><strong>\u5F02\u6B65\u7248\u672C</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// fs.rename(oldPath, newPath, callback)</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&#39;./hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./world&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u91CD\u547D\u540D\u6210\u529F&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>\u540C\u6B65\u7248\u672C</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// fs.renameSync(oldPath, newPath)</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">renameSync</span><span class="token punctuation">(</span><span class="token string">&#39;./world&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>promises</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> rename <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs/promises&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&#39;./world&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">rename</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-11-\u83B7\u53D6\u6587\u4EF6\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#_2-11-\u83B7\u53D6\u6587\u4EF6\u72B6\u6001" aria-hidden="true">#</a> 2.11 \u83B7\u53D6\u6587\u4EF6\u72B6\u6001</h3><p>1.\u5F02\u6B65\uFF1Afs.stat(path,callback): path\u662F\u4E00\u4E2A\u8868\u793A\u8DEF\u5F84\u7684\u5B57\u7B26\u4E32,callback\u63A5\u6536\u4E24\u4E2A\u53C2\u6570(err,stats),\u5176\u4E2Dstats\u5C31\u662Ffs.stats\u7684\u4E00\u4E2A\u5B9E\u4F8B\uFF1B</p><p>2.\u540C\u6B65\uFF1Afs.statSync(path) \u53EA\u63A5\u6536\u4E00\u4E2Apath\u53D8\u91CF\uFF0Cfs.statSync(path)\u5176\u5B9E\u662F\u4E00\u4E2Afs.stats\u7684\u4E00\u4E2A\u5B9E\u4F8B\uFF1B</p><p>\u65B9\u6CD5</p><ul><li>stats.isFile() -- \u662F\u5426\u6587\u4EF6</li><li>stats.isDirectory() -- \u662F\u5426\u76EE\u5F55</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Node.js program to demonstrate the </span>
<span class="token comment">// fs.statSync() method </span>
  
<span class="token comment">// Import the filesystem module </span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  
<span class="token comment">// Getting information for a file </span>
statsObj <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">&quot;test_file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>statsObj<span class="token punctuation">)</span><span class="token punctuation">;</span>  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Path is file:&quot;</span><span class="token punctuation">,</span> statsObj<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Path is directory:&quot;</span><span class="token punctuation">,</span> statsObj<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  
<span class="token comment">// Getting information for a directory </span>
statsObj <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">&quot;test_directory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>statsObj<span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Path is file:&quot;</span><span class="token punctuation">,</span> statsObj<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Path is directory:&quot;</span><span class="token punctuation">,</span> statsObj<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>\u8F93\u51FA\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Stats <span class="token punctuation">{</span>
  <span class="token literal-property property">dev</span><span class="token operator">:</span><span class="token number">3229478529</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token number">33206</span><span class="token punctuation">,</span>
  <span class="token literal-property property">nlink</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">uid</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gid</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rdev</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blksize</span><span class="token operator">:</span><span class="token number">4096</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ino</span><span class="token operator">:</span><span class="token number">1970324837039946</span><span class="token punctuation">,</span>
  <span class="token literal-property property">size</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blocks</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">atimeMs</span><span class="token operator">:</span><span class="token number">1582306776282</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mtimeMs</span><span class="token operator">:</span><span class="token number">1582482953967</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ctimeMs</span><span class="token operator">:</span><span class="token number">1582482953968.2532</span><span class="token punctuation">,</span>
  <span class="token literal-property property">birthtimeMs</span><span class="token operator">:</span><span class="token number">1582306776282.142</span><span class="token punctuation">,</span>
  <span class="token literal-property property">atime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>21T17<span class="token operator">:</span><span class="token number">39</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">.</span>282Z<span class="token punctuation">,</span>
  <span class="token literal-property property">mtime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>23T18<span class="token operator">:</span><span class="token number">35</span><span class="token operator">:</span><span class="token number">53</span><span class="token punctuation">.</span>967Z<span class="token punctuation">,</span>
  <span class="token literal-property property">ctime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>23T18<span class="token operator">:</span><span class="token number">35</span><span class="token operator">:</span><span class="token number">53</span><span class="token punctuation">.</span>968Z<span class="token punctuation">,</span>
  <span class="token literal-property property">birthtime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>21T17<span class="token operator">:</span><span class="token number">39</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">.</span>282Z
<span class="token punctuation">}</span>
Path is file<span class="token operator">:</span><span class="token boolean">true</span>
Path is directory<span class="token operator">:</span><span class="token boolean">false</span>
Stats <span class="token punctuation">{</span>
  <span class="token literal-property property">dev</span><span class="token operator">:</span><span class="token number">3229478529</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token number">16822</span><span class="token punctuation">,</span>
  <span class="token literal-property property">nlink</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">uid</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gid</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rdev</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blksize</span><span class="token operator">:</span><span class="token number">4096</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ino</span><span class="token operator">:</span><span class="token number">562949953486669</span><span class="token punctuation">,</span>
  <span class="token literal-property property">size</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blocks</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">atimeMs</span><span class="token operator">:</span><span class="token number">1582482965037.8445</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mtimeMs</span><span class="token operator">:</span><span class="token number">1581074249467.7114</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ctimeMs</span><span class="token operator">:</span><span class="token number">1582482964979.8303</span><span class="token punctuation">,</span>
  <span class="token literal-property property">birthtimeMs</span><span class="token operator">:</span><span class="token number">1582306776288.1958</span><span class="token punctuation">,</span>
  <span class="token literal-property property">atime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>23T18<span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">05</span><span class="token punctuation">.</span>038Z<span class="token punctuation">,</span>
  <span class="token literal-property property">mtime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>07T11<span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">29</span><span class="token punctuation">.</span>468Z<span class="token punctuation">,</span>
  <span class="token literal-property property">ctime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>23T18<span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">04</span><span class="token punctuation">.</span>980Z<span class="token punctuation">,</span>
  <span class="token literal-property property">birthtime</span><span class="token operator">:</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>21T17<span class="token operator">:</span><span class="token number">39</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">.</span>288Z
<span class="token punctuation">}</span>
Path is file<span class="token operator">:</span><span class="token boolean">false</span>
Path is directory<span class="token operator">:</span><span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="_2-12-\u8FFD\u52A0\u6587\u4EF6\u5185\u5BB9" tabindex="-1"><a class="header-anchor" href="#_2-12-\u8FFD\u52A0\u6587\u4EF6\u5185\u5BB9" aria-hidden="true">#</a> 2.12 \u8FFD\u52A0\u6587\u4EF6\u5185\u5BB9</h3><blockquote><p>fs.appendFile(file, data[, options], callback)</p></blockquote><ul><li>file\uFF1A\u53EF\u4EE5\u662F\u6587\u4EF6\u8DEF\u5F84\uFF0C\u4E5F\u53EF\u4EE5\u662F\u6587\u4EF6\u53E5\u67C4\u3002\uFF08\u8FD8\u53EF\u4EE5\u662Fbuffer\uFF1F\uFF09</li><li>data\uFF1A\u8981\u8FFD\u52A0\u7684\u5185\u5BB9\u3002string\u6216\u8005buffer\u3002</li><li>options <ul><li>encoding\uFF1A\u7F16\u7801\uFF0C\u9ED8\u8BA4\u662F<code>utf8</code></li><li>mode\uFF1A\u9ED8\u8BA4\u662F<code>0o666</code></li><li>flag\uFF1A\u9ED8\u8BA4\u662F<code>a</code></li></ul></li></ul><p>\u6CE8\u610F\uFF1A\u5982\u679C<code>file</code>\u662F\u6587\u4EF6\u53E5\u67C4\uFF0C\u90A3\u4E48</p><ul><li>\u5F00\u59CB\u8FFD\u52A0\u6570\u636E\u524D\uFF0Cfile\u9700\u8981\u5DF2\u7ECF\u6253\u5F00\u3002</li><li>file\u9700\u8981\u624B\u52A8\u5173\u95ED\u3002</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">&#39;./extra/fileForAppend.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;append\u6210\u529F&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3-\u4E8B\u4EF6\u673A\u5236\u6A21\u5757-events" tabindex="-1"><a class="header-anchor" href="#_3-\u4E8B\u4EF6\u673A\u5236\u6A21\u5757-events" aria-hidden="true">#</a> 3.\u4E8B\u4EF6\u673A\u5236\u6A21\u5757 events</h2><p>Node.js \u6709\u591A\u4E2A\u5185\u7F6E\u7684\u4E8B\u4EF6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u5F15\u5165 events \u6A21\u5757\uFF0C\u5E76\u901A\u8FC7\u5B9E\u4F8B\u5316 EventEmitter \u7C7B\u6765\u7ED1\u5B9A\u548C\u76D1\u542C\u4E8B\u4EF6\uFF0C\u5982\u4E0B\u5B9E\u4F8B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5F15\u5165 events \u6A21\u5757</span>
<span class="token keyword">var</span> EventEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;events&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u521B\u5EFA eventEmitter \u5BF9\u8C61</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u4EE5\u4E0B\u7A0B\u5E8F\u7ED1\u5B9A\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u7ED1\u5B9A\u4E8B\u4EF6\u53CA\u4E8B\u4EF6\u7684\u5904\u7406\u7A0B\u5E8F</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;eventName&#39;</span><span class="token punctuation">,</span> eventHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u7A0B\u5E8F\u89E6\u53D1\u4E8B\u4EF6\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u89E6\u53D1\u4E8B\u4EF6</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;eventName&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>EventEmitter </code>\u7684\u6BCF\u4E2A\u4E8B\u4EF6\u7531\u4E00\u4E2A\u4E8B\u4EF6\u540D\u548C\u82E5\u5E72\u4E2A\u53C2\u6570\u7EC4\u6210\uFF0C\u4E8B\u4EF6\u540D\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u901A\u5E38\u8868\u8FBE\u4E00\u5B9A\u7684\u8BED\u4E49\u3002\u5BF9\u4E8E\u6BCF\u4E2A\u4E8B\u4EF6\uFF0C<code>EventEmitter </code>\u652F\u6301 \u82E5\u5E72\u4E2A\u4E8B\u4EF6\u76D1\u542C\u5668\u3002</p><p>\u5F53\u4E8B\u4EF6\u89E6\u53D1\u65F6\uFF0C\u6CE8\u518C\u5230\u8FD9\u4E2A\u4E8B\u4EF6\u7684\u4E8B\u4EF6\u76D1\u542C\u5668\u88AB\u4F9D\u6B21\u8C03\u7528\uFF0C\u4E8B\u4EF6\u53C2\u6570\u4F5C\u4E3A\u56DE\u8C03\u51FD\u6570\u53C2\u6570\u4F20\u9012\u3002</p><p>\u8BA9\u6211\u4EEC\u4EE5\u4E0B\u9762\u7684\u4F8B\u5B50\u89E3\u91CA\u8FD9\u4E2A\u8FC7\u7A0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5F15\u5165 events \u6A21\u5757</span>
<span class="token keyword">var</span> EventEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;events&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u521B\u5EFA eventEmitter \u5BF9\u8C61</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;someEvent&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;listener1&#39;</span><span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;someEvent&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;listener2&#39;</span><span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;someEvent&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;arg1 \u53C2\u6570&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;arg2 \u53C2\u6570&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u6267\u884C\u4EE5\u4E0A\u4EE3\u7801\uFF0C\u8FD0\u884C\u7684\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">node</span> event.js 
listener1 arg1 \u53C2\u6570 arg2 \u53C2\u6570
listener2 arg1 \u53C2\u6570 arg2 \u53C2\u6570
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u4EE5\u4E0A\u4F8B\u5B50\u4E2D\uFF0Cevent \u4E3A\u4E8B\u4EF6 someEvent \u6CE8\u518C\u4E86\u4E24\u4E2A\u4E8B\u4EF6\u76D1\u542C\u5668\uFF0C\u7136\u540E\u89E6\u53D1\u4E86 someEvent \u4E8B\u4EF6\u3002</p><p>\u8FD0\u884C\u7ED3\u679C\u4E2D\u53EF\u4EE5\u770B\u5230\u4E24\u4E2A\u4E8B\u4EF6\u76D1\u542C\u5668\u56DE\u8C03\u51FD\u6570\u88AB\u5148\u540E\u8C03\u7528\u3002 \u8FD9\u5C31\u662F<code>EventEmitter</code>\u6700\u7B80\u5355\u7684\u7528\u6CD5\u3002</p><p><code>EventEmitter </code>\u63D0\u4F9B\u4E86\u591A\u4E2A\u5C5E\u6027\uFF0C\u5982 <strong>on</strong> \u548C <strong>emit</strong>\u3002<strong>on</strong> \u51FD\u6570\u7528\u4E8E\u7ED1\u5B9A\u4E8B\u4EF6\u51FD\u6570\uFF0C<strong>emit</strong> \u5C5E\u6027\u7528\u4E8E\u89E6\u53D1\u4E00\u4E2A\u4E8B\u4EF6</p>`,124);function m(d,g){const p=u("ExternalLinkIcon");return e(),o(l,null,[i,s("p",null,[n("\u76F4\u63A5\u770B"),s("a",k,[n("\u5B98\u65B9\u6587\u6863"),c(p)]),n("\u7684\u4F8B\u5B50")]),b],64)}var h=t(r,[["render",m],["__file","06 \u3010nodejs\u5185\u7F6E\u6A21\u5757\uFF08\u4E2D\uFF09\u3011.html.vue"]]);export{h as default};
